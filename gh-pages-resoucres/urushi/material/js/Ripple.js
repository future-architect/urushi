define("Ripple",["jquery","Urushi","materialConfig","Base"],function(t,e,i,o){"use strict";var n={CLASS_NAME_RIPPLE_ON:"ripple-on",CLASS_NAME_RIPPLE_OUT:"ripple-out",ATTRIBUTE_RIPPLE_ANIMATE:"data-ripple-animate",ATTRIBUTE_RIPPLE_ANIMATE_ON:"on",ATTRIBUTE_RIPPLE_ANIMATE_OFF:"off",ATTRIBUTE_RIPPLE_MOUSE_DOWN:"data-ripple-mousedown",ATTRIBUTE_RIPPLE_MOUSE_DOWN_ON:"on",ATTRIBUTE_RIPPLE_MOUSE_DOWN_OFF:"off",ATTRIBUTE_RIPPLE_COLOR:"data-ripple-color"};return o.extend({initOption:function(t){e.addEvent(this._getRippleRootNode(),"mousedown",this,"_onRippleStart"),e.addEvent(this._getRippleRootNode(),"touchstart",this,"_onRippleStart")},_getRippleRootNode:function(){return this.rootNode},_createRippleWrapperElement:function(){var t,e=this._getRippleRootNode().getElementsByClassName("ripple-wrapper");return e.length?e[0]:(t=document.createElement("div"),t.className="ripple-wrapper",this._getRippleRootNode().appendChild(t),t)},_getX:function(i,o){var n=t(i).offset();return e.isTouch()?(o=o.originalEvent||o,1===o.touches.length?o.touches[0].pageX-n.left:NaN):o.pageX-n.left},_getY:function(i,o){var n=t(i).offset();return e.isTouch()?(o=o.originalEvent||o,1===o.touches.length?o.touches[0].pageY-n.top:NaN):o.pageY-n.top},_getRippleColor:function(){return this._getRippleRootNode().getAttribute(n.ATTRIBUTE_RIPPLE_COLOR)||window.getComputedStyle(this._getRippleRootNode()).color},_getNewSize:function(e){return Math.max(t(this._getRippleRootNode()).outerWidth(),t(this._getRippleRootNode()).outerHeight())/t(e).outerWidth()*2.5},_createRippleElement:function(t,e,i){var o=document.createElement("div");return o.className="ripple",o.style.left=t+"px",o.style.top=e+"px",o.style.backgroundColor=i,o},_onRippleStart:function(o){var n,r,p,_,a;return e.isTouch()!==e.isTouchEvent(o)?!1:(n=this._createRippleWrapperElement(),r=this._getX(n,o),p=this._getY(n,o),isNaN(r)||isNaN(p)?!1:(_=this._getRippleColor(),a=this._createRippleElement(r,p,_),n.appendChild(a),function(){return window.getComputedStyle(a).opacity}(),this._rippleOn(a),setTimeout(this._rippleAnimationEnd.bind(this,a,n),i.DEFAULT_VALUE_DURATION),t(this._getRippleRootNode()).on("mouseup mouseleave touchend",this._onRippleMouseup.bind(this,{ripple:a,wrapper:n})),!0))},_rippleAnimationEnd:function(t,e){t.setAttribute(n.ATTRIBUTE_RIPPLE_ANIMATE,n.ATTRIBUTE_RIPPLE_ANIMATE_OFF),n.ATTRIBUTE_RIPPLE_MOUSE_DOWN_OFF===t.getAttribute(n.ATTRIBUTE_RIPPLE_MOUSE_DOWN)&&this._rippleOut(t,e)},_onRippleMouseup:function(t,e){var i,o;t&&t.ripple&&t.wrapper&&(i=t.ripple,o=t.wrapper,i.setAttribute(n.ATTRIBUTE_RIPPLE_MOUSE_DOWN,n.ATTRIBUTE_RIPPLE_MOUSE_DOWN_OFF),n.ATTRIBUTE_RIPPLE_ANIMATE_OFF===i.getAttribute(n.ATTRIBUTE_RIPPLE_ANIMATE)&&this._rippleOut(i,o))},_rippleOn:function(o){var r=this._getNewSize(o),p=t(this._getRippleRootNode()),_=t(o);e.hasTransitionSupport()?(_.css({"-ms-transform":"scale("+r+")","-moz-transform":"scale("+r+")","-webkit-transform":"scale("+r+")",transform:"scale("+r+")"}).addClass(n.CLASS_NAME_RIPPLE_ON),o.setAttribute(n.ATTRIBUTE_RIPPLE_ANIMATE,n.ATTRIBUTE_RIPPLE_ANIMATE_ON),o.setAttribute(n.ATTRIBUTE_RIPPLE_MOUSE_DOWN,n.ATTRIBUTE_RIPPLE_MOUSE_DOWN_ON)):_.animate({width:2*Math.max(p.outerWidth(),p.outerHeight()),height:2*Math.max(p.outerWidth(),p.outerHeight()),"margin-left":-1*Math.max(p.outerWidth(),p.outerHeight()),"margin-top":-1*Math.max(p.outerWidth(),p.outerHeight()),opacity:i.DEFAULT_VALUE_RIPPLE_OPACITY_MAX},i.DEFAULT_VALUE_DURATION,function(){_.trigger("transitionend")})},_rippleOut:function(o,r){t(o).off(),e.hasTransitionSupport()?t(o).addClass(n.CLASS_NAME_RIPPLE_OUT):t(o).animate({opacity:i.DEFAULT_VALUE_RIPPLE_OPACITY_MIN},100,function(){t(o).trigger("transitionend")}),t(o).on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){t(o).remove()})},destroy:function(){e.removeEvent(this._getRippleRootNode(),"mousedown",this,"_onRippleStart"),e.removeEvent(this._getRippleRootNode(),"touchstart",this,"_onRippleStart"),this._super()}})});