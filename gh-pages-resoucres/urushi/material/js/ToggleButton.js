define("ToggleButton",["jquery","jqueryUi","Urushi","materialConfig","Base","text!toggleButtonTemplate","text!toggleButtonTransitionUnitTemplate"],function(t,e,i,o,n,s,a){"use strict";var d={ID_PREFIX:"urushi.ToggleButton",EMBEDDED:{toggleButtonClass:"",additionalClass:"",label:""},INTERVAL:10,RIPPLE_SCALE_MIN:0,RIPPLE_SCALE_MAX:1,CHECKMARK_POSITION_LEFT:15,CHECKMARK_POSITION_RIGHT:-5,RIPPLE_POSITION_LEFT:2,RIPPLE_POSITION_RIGHT:-18},u=0;return n.extend({template:void 0,embedded:void 0,_initProperties:function(t){this.template=s,this.embedded=d.EMBEDDED},_render:function(e){this._super(e),i.hasTransitionSupport()||t(this.rootNode).find(".toggle").replaceWith(a)},initOption:function(t){i.hasTransitionSupport()||i.addEvent(this.inputNode,"click",this,"_onClick"),this.setValue(t.checked)},_onClick:function(){var e,n,s,a,u,r,l,c,p=0,E=d.RIPPLE_SCALE_MIN,N=o.DEFAULT_VALUE_RIPPLE_OPACITY_MIN,_=function(e,i){p*d.INTERVAL<i?setTimeout(function(){E+=d.RIPPLE_SCALE_MAX*d.INTERVAL/i,N+=o.DEFAULT_VALUE_RIPPLE_OPACITY_MAX*d.INTERVAL/i,t(e).css({msTransform:"scale("+E+")",opacity:N}),p++,_(e,i)},d.INTERVAL):t(e).animate({msTransform:"scale("+d.RIPPLE_SCALE_MIN+")",opacity:o.DEFAULT_VALUE_RIPPLE_OPACITY_MIN},i,function(){t(e).parents(".togglebutton").find("input").prop("disabled",!1)})};i.hasTransitionSupport()||this.inputNode.hasAttribute("disabled")||(this.inputNode.checked?(this.rootNode.classList.contains("togglebutton")&&1!==this.rootNode.classList.length&&(s=document.createElement("div"),s.classList.add("toggle-transition-unit-tmp"),this.inputNode.appendChild(s),a=document.createElement("div"),a.classList.add("toggle-button-unit-tmp"),this.inputNode.appendChild(a),e=t(this.inputNode).find(".toggle-transition-unit-tmp").css("background-color"),n=t(this.inputNode).find(".toggle-button-unit-tmp").css("background-color"),t(s).remove(),t(a).remove()),t(this.buttonNode).animate({left:d.CHECKMARK_POSITION_LEFT,backgroundColor:n},o.DEFAULT_VALUE_DURATION),t(this.toggleNode).animate({backgroundColor:e},o.DEFAULT_VALUE_DURATION),t(this.rippleNode).animate({left:d.RIPPLE_POSITION_LEFT},o.DEFAULT_VALUE_DURATION,_(this.rippleNode,o.DEFAULT_VALUE_DURATION))):(l=document.createElement("div"),c=document.createElement("div"),l.className="toggle-transition-unit",c.className="toggle-button-unit",this.inputNode.appendChild(l),this.inputNode.appendChild(c),u=t(this.inputNode).find(".toggle-transition-unit").css("background-color"),r=t(this.inputNode).find(".toggle-button-unit").css("background-color"),t(l).remove(),t(c).remove(),t(this.buttonNode).animate({left:d.CHECKMARK_POSITION_RIGHT,backgroundColor:r},o.DEFAULT_VALUE_DURATION),t(this.toggleNode).animate({backgroundColor:u},o.DEFAULT_VALUE_DURATION),t(this.rippleNode).animate({left:d.RIPPLE_POSITION_RIGHT},o.DEFAULT_VALUE_DURATION,_(this.rippleNode,o.DEFAULT_VALUE_DURATION))))},_attachNode:function(){this.inputNode=this.rootNode.getElementsByTagName("input")[0],i.hasTransitionSupport()||(this.toggleNode=this.rootNode.getElementsByClassName("toggle-transition-unit")[0],this.rippleNode=this.rootNode.getElementsByClassName("toggle-ripple-unit")[0],this.buttonNode=this.rootNode.getElementsByClassName("toggle-button-unit")[0])},_getId:function(){return d.ID_PREFIX+u++},setDisabled:function(t){return this._super(t)?(t?(this.inputNode.setAttribute("tabIndex","-1"),this.inputNode.setAttribute("disabled",!0)):(this.inputNode.removeAttribute("tabIndex"),this.inputNode.removeAttribute("disabled")),!0):!1},getValue:function(){return this.inputNode.checked},setValue:function(t){"boolean"==typeof t&&(this.inputNode.checked=t,this._onClick())},clear:function(){this.setValue(!1)},destroy:function(){i.hasTransitionSupport()||i.removeEvent(this.inputNode,"click",this,"_onClick"),this._super()}})});